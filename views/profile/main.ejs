<h1><%= user.username %>'s Profile</h1>
<div class="row">
    <div class="col s4">
        <button id="upload_widget" class="cloudinary-button">Upload Profile Picture</button>
        <img class="responsive-img" alt="user image" src="<%= user.photoUrl %>">
    </div>
    <div class="col s8">
        <h2><%= user.username %></h2>
        <p><strong>Full Name:</strong><%= user.firstname %> <%= user.lastname %></p>
        <p><strong>Admin Status:</strong> <%= user.admin ? 'Yes' : 'No' %></p>
    </div>
</div>

<script src="https://widget.cloudinary.com/v2.0/global/all.js" type="text/javascript"></script>

<script type="text/javascript">  
    let myWidget = cloudinary.createUploadWidget({
        cloudName: 'dschawel', 
        uploadPreset: 'et0rvort'}, (error, result) => { 
        if (!error && result && result.event === "success") { 
            console.log('Done! Here is the image info: ', result.info); 
            }
        }
    )
    
    document.getElementById("upload_widget").addEventListener("click", function(){
        myWidget.open();
    }, false);
</script>